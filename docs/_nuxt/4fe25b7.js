(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{212:function(t,e,n){t.exports=n.p+"videos/qingwa.9696e59.mp4"},213:function(t,e,n){t.exports=n.p+"img/guide.33b4c33.png"},214:function(t,e,n){t.exports=n.p+"img/bearPawOpen.23214bc.jpg"},215:function(t,e,n){t.exports=n.p+"img/arrow.da8541e.png"},216:function(t,e,n){t.exports=n.p+"img/lt-hand.684e10a.png"},217:function(t,e,n){t.exports=n.p+"img/mf.81f6cd2.png"},218:function(t,e,n){t.exports=n.p+"img/lunz.6a46d60.png"},219:function(t,e,n){t.exports=n.p+"img/paint.3e5f188.png"},220:function(t,e,n){t.exports=n.p+"img/gamepad.88e2ea9.png"},221:function(t,e,n){t.exports=n.p+"img/slwq.2f0b3db.png"},222:function(t,e,n){t.exports=n.p+"img/yzlw.702732d.png"},224:function(t,e,n){var map={"./duck.mp4":236,"./fa.mp4":237,"./fish.mp4":238,"./hair.mp4":239,"./lap.mp4":240,"./nan.mp4":241,"./paper.mp4":242,"./pi.mp4":243,"./qingwa.mp4":212,"./xiang.mp4":244,"./yezi.mp4":245};function o(t){var e=r(t);return n(e)}function r(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}o.keys=function(){return Object.keys(map)},o.resolve=r,t.exports=o,o.id=224},225:function(t,e,n){var content=n(247);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("c6d180ba",content,!0,{sourceMap:!1})},236:function(t,e,n){t.exports=n.p+"videos/duck.c84be3f.mp4"},237:function(t,e,n){t.exports=n.p+"videos/fa.5da34fb.mp4"},238:function(t,e,n){t.exports=n.p+"videos/fish.135d7e7.mp4"},239:function(t,e,n){t.exports=n.p+"videos/hair.bbd7ded.mp4"},240:function(t,e,n){t.exports=n.p+"videos/lap.ea9506b.mp4"},241:function(t,e,n){t.exports=n.p+"videos/nan.2f3e269.mp4"},242:function(t,e,n){t.exports=n.p+"videos/paper.5cbd577.mp4"},243:function(t,e,n){t.exports=n.p+"videos/pi.7711b69.mp4"},244:function(t,e,n){t.exports=n.p+"videos/xiang.95b0d54.mp4"},245:function(t,e,n){t.exports=n.p+"videos/yezi.00512c9.mp4"},246:function(t,e,n){"use strict";n(225)},247:function(t,e,n){var o=n(23),r=n(148),d=n(213),c=n(214),h=n(215),m=n(216),v=n(217),l=n(218),f=n(219),w=n(220),x=n(221),k=n(222);e=o(!1);var C=r(d),y=r(c),_=r(h),S=r(m),z=r(v),Y=r(l),D=r(f),T=r(w),H=r(x),I=r(k);e.push([t.i,"@-webkit-keyframes gift-move-data-v-e8321b76{0%{-webkit-transform:translateY(0)}to{-webkit-transform:translateY(-.3rem)}}@keyframes gift-move-data-v-e8321b76{0%{-webkit-transform:translateY(0)}to{-webkit-transform:translateY(-.3rem)}}@-webkit-keyframes hand-move-up-data-v-e8321b76{0%{-webkit-transform:translateY(1rem)}to{-webkit-transform:translateY(-1rem)}}@keyframes hand-move-up-data-v-e8321b76{0%{-webkit-transform:translateY(1rem)}to{-webkit-transform:translateY(-1rem)}}@-webkit-keyframes hand-move-down-data-v-e8321b76{0%{-webkit-transform:translateY(-1rem)}to{-webkit-transform:translateY(1rem)}}@keyframes hand-move-down-data-v-e8321b76{0%{-webkit-transform:translateY(-1rem)}to{-webkit-transform:translateY(1rem)}}.index-wrap[data-v-e8321b76]{background:#ec7664;background-size:cover}.index-wrap[data-v-e8321b76],.index-wrap .guide[data-v-e8321b76]{position:absolute;top:0;left:0;bottom:0;right:0}.index-wrap .guide[data-v-e8321b76]{background:rgba(0,0,0,.8);z-index:1000;display:-webkit-box;-webkit-box-pack:center;-webkit-box-align:center;flex-direction:column}.index-wrap .guide .pannel[data-v-e8321b76]{width:100%;height:2.73rem;background-image:url("+C+");background-repeat:no-repeat;background-size:80% auto;background-position:50%;position:relative}.index-wrap .guide .pannel .counting[data-v-e8321b76]{position:absolute;bottom:-.3rem;font-size:.5rem;color:#fff;width:100%;text-align:center}.index-wrap .bear-hand[data-v-e8321b76]{position:absolute;top:0;width:100%;background-image:url("+y+");background-size:auto 100%}.index-wrap .bear-hand .arrow[data-v-e8321b76]{width:.84rem;height:1.81rem;background-image:url("+_+");background-size:100% 100%;position:absolute;top:50%;margin-top:-1.8rem;left:50%;margin-left:-.52rem}.index-wrap .bear-hand .arrow.up[data-v-e8321b76]{-webkit-transform:rotate(180deg)}.index-wrap .bear-hand .arrow.down[data-v-e8321b76]{-webkit-transform:rotate(0deg)}.index-wrap .bear-hand .lt-hand[data-v-e8321b76]{position:absolute;top:1.23rem;right:.15rem;width:1.47rem;height:1.07rem;background-size:100% 100%;background-image:url("+S+")}.index-wrap .bear-hand .lt-hand.up[data-v-e8321b76]{-webkit-animation:hand-move-up-data-v-e8321b76 3s infinite}.index-wrap .bear-hand .lt-hand.down[data-v-e8321b76]{-webkit-animation:hand-move-down-data-v-e8321b76 3s infinite}.index-wrap .gift-mf[data-v-e8321b76]{width:1.15rem;height:1.33rem;position:absolute;top:.62rem;right:0;background-image:url("+z+");background-size:100% 100%;-webkit-animation:gift-move-data-v-e8321b76 4s infinite alternate;z-index:1}.index-wrap .gift-lunz[data-v-e8321b76]{width:.94rem;height:1.59rem;top:.75rem;background-image:url("+Y+");-webkit-animation:gift-move-data-v-e8321b76 3s 1s infinite alternate}.index-wrap .gift-lunz[data-v-e8321b76],.index-wrap .gift-paint[data-v-e8321b76]{position:absolute;left:0;background-size:100% 100%;z-index:1}.index-wrap .gift-paint[data-v-e8321b76]{width:.93rem;height:3.1rem;bottom:.1rem;background-image:url("+D+");-webkit-animation:gift-move-data-v-e8321b76 5s .5s infinite alternate}.index-wrap .gift-gamepad[data-v-e8321b76]{width:.93rem;height:.94rem;position:absolute;bottom:.1rem;right:0;background-image:url("+T+");background-size:100% 100%;-webkit-animation:gift-move-data-v-e8321b76 2s .5s infinite alternate;z-index:1}.index-wrap .btns[data-v-e8321b76]{position:absolute;padding:0 .16rem;bottom:.54rem;width:100%;height:1rem;z-index:2}.index-wrap .btns>div[data-v-e8321b76]{background-size:100% auto;background-repeat:no-repeat;background-position:bottom;width:50%;height:100%;position:absolute}.index-wrap .btns .slwq[data-v-e8321b76]{left:0;background-image:url("+H+")}.index-wrap .btns .yzlw[data-v-e8321b76]{right:0;background-image:url("+I+")}",""]),t.exports=e},256:function(t,e,n){"use strict";n.r(e);n(53),n(54),n(38);var o={data:function(){return{screenWidth:0,screenHeight:0,bearTop:0,bearHeight:0,moveDistance:0,moveStartY:0,bearHandPosition:"0px 0px",currentStep:0,timer:null,showBtns:!1,showGift:!1,counting:3,openStep:0,slideDirection:"",giftVideoURL:"",canvas:{showCanvas:null,showCtx:null,bufferCanvas:null,bufferCtx:null,video:null,width:0,height:0}}},watch:{moveDistance:function(t){var e=Math.floor(t/12);e>0&&e<6&&(this.currentStep=e,this.bearHandPosition="".concat(-this.currentStep*this.screenWidth,"px 0"))}},mounted:function(){this.screenWidth=window.screen.width,this.screenHeight=window.screen.height,this.bearHeight=this.screenWidth*(500/375),this.bearTop=this.bearHeight>this.screenHeight/2?this.screenHeight/2-this.bearHeight+80:0,this.slideDirection=Math.random()>.5?"up":"down",this.initGift(),this.initCanvas(),this.startCount()},methods:{initGift:function(){var t=this.$route.query.gift;if(t&&this.videosList.includes(t))this.giftVideoURL=n(224)("./".concat(t,".mp4"));else{var e=Math.floor(Math.random()*this.videosList.length);this.giftVideoURL=n(224)("./".concat(this.videosList[e],".mp4"))}},initCanvas:function(){var t=this;this.canvas.showCanvas=document.getElementById("show"),this.canvas.showCtx=this.canvas.showCanvas.getContext("2d"),this.canvas.bufferCanvas=document.getElementById("buffer"),this.canvas.bufferCtx=this.canvas.bufferCanvas.getContext("2d"),this.canvas.video=document.getElementById("alpha-video"),this.canvas.width=this.canvas.showCanvas.width,this.canvas.height=this.canvas.showCanvas.height,this.canvas.video.addEventListener("play",(function(e){t.processFrame()})),document.addEventListener("WeixinJSBridgeReady",(function(){t.$nextTick((function(){t.canvas.video.play()}))}))},startCount:function(){var t=this;this.counter=setInterval((function(){if(0==t.counting)return clearInterval(t.counter),void(t.counter=null);t.counting--}),1e3)},onTouchStart:function(t){this.moveStartY=t.touches[0].clientY},onTouchMove:function(t){var e=t.changedTouches[0].clientY;this.moveDistance=Math.abs(e-this.moveStartY)},onTouchEnd:function(t){var e=t.changedTouches[0].clientY,n=e-this.moveStartY>0&&"down"==this.slideDirection||e-this.moveStartY<0&&"up"==this.slideDirection;this.moveDistance=Math.abs(e-this.moveStartY),this.moveDistance>=216&&n?2==this.openStep?(this.showBtns=!0,this.showGift=!0,this.continueFinish(),this.playGift()):(this.openStep++,this.backToStart(),this.slideDirection=Math.random()>.5?"up":"down",alert("恭喜完成第".concat(this.openStep,"次"))):this.moveDistance>0&&this.currentStep>1&&this.backToStart()},addZero:function(t){return t>=10?t:"0"+t},reset:function(){clearInterval(this.timer),this.timer=null,this.moveStartY=0,this.currentStep=0},continueFinish:function(){var t=this,i=this.currentStep;null!=this.timer?this.reset():this.timer=setInterval((function(){12!=++i?t.bearHandPosition="".concat(-i*t.screenWidth,"px 0"):t.reset()}),80)},backToStart:function(){var t=this,i=this.currentStep;null!=this.timer?this.reset():this.timer=setInterval((function(){0!=--i?t.bearHandPosition="".concat(-i*t.screenWidth,"px 0"):t.reset()}),80)},processFrame:function(){var t=this.canvas,e=(t.showCanvas,t.showCtx),n=(t.bufferCanvas,t.bufferCtx),video=t.video,o=t.width,r=t.height;n.drawImage(video,0,0,2*o,r);for(var image=n.getImageData(o,0,o,r),d=n.getImageData(0,0,o,r).data,i=3,c=image.data.length;i<c;i+=4)image.data[i]=d[i-1];e.putImageData(image,0,0,0,0,o,r),window.requestAnimationFrame(this.processFrame)},playGift:function(){this.canvas.video.play()},goMake:function(){this.$router.push("/make")}}},r=(n(246),n(35)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index-wrap"},[n("div",{directives:[{name:"show",rawName:"v-show",value:0!=t.counting,expression:"counting != 0"}],staticClass:"guide"},[n("div",{staticClass:"pannel"},[n("div",{staticClass:"counting animate__animated animate__rubberBand animate__repeat-3"},[t._v(t._s(t.counting))])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:0==t.counting,expression:"counting == 0"}],staticClass:"main"},[n("div",{staticClass:"bear-hand",style:{backgroundPosition:t.bearHandPosition,height:t.bearHeight+"px",top:t.bearTop+"px"},on:{touchstart:function(e){return e.preventDefault(),t.onTouchStart(e)},touchmove:function(e){return e.preventDefault(),t.onTouchMove(e)},touchend:function(e){return e.preventDefault(),t.onTouchEnd(e)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showGift,expression:"!showGift"}],class:["arrow",t.slideDirection]}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showGift,expression:"!showGift"}],class:["lt-hand",t.slideDirection]})]),t._v(" "),n("div",{staticClass:"gift-mf"}),t._v(" "),n("div",{staticClass:"gift-lunz"}),t._v(" "),n("div",{staticClass:"gift-paint"}),t._v(" "),n("div",{staticClass:"gift-gamepad"}),t._v(" "),n("transition",[t.showBtns?n("div",{staticClass:"btns animate__animated animate__bounceInUp"},[n("div",{staticClass:"yzlw",on:{click:t.goMake}}),t._v(" "),n("div",{staticClass:"slwq"})]):t._e()]),t._v(" "),n("video",{staticStyle:{position:"absolute",left:"0",bottom:"0",height:"1px",width:"1px",background:"#000"},attrs:{muted:"",loop:"",autoplay:"",id:"alpha-video",src:t.giftVideoURL,"x5-video-player-type":"h5","webkit-playsinline":"",playsinline:"",preload:""},domProps:{muted:!0}},[n("source",{attrs:{src:t.giftVideoURL,type:"video/mp4"}})]),t._v(" "),n("div",{attrs:{id:"output"}},[n("canvas",{directives:[{name:"show",rawName:"v-show",value:t.showGift,expression:"showGift"}],staticClass:"animate__animated animate__bounceInUp",attrs:{id:"show",width:"375",height:"375"}}),t._v(" "),n("canvas",{staticStyle:{display:"none"},attrs:{id:"buffer",height:"375",width:"750"}})])],1),t._v(" "),n("div",{staticClass:"logo"})])}),[],!1,null,"e8321b76",null);e.default=component.exports}}]);